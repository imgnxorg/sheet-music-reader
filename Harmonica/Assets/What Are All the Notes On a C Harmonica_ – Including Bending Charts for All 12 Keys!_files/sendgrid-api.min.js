"use strict";(function(a){a(document).ready(function(){var c=a("._sendGrid_form_wrapper");a(c).each(function(){new b(this)})});function b(b){var d=a(b).find("._sendGrid_ajax");a(d).on("submit",function(a){a.preventDefault();if(f()){var b=g();i(b)}});function f(){var b=true;var c=a(d).find("input:not([type=\"submit\"])");a(c).each(function(){a(this).removeClass("invalid");if(a(this).prop("required")){if(!a(this).val()){a(this).addClass("invalid");b=false}}});return b}function g(){var b={};var c=a(d).find("input:not([type=\"submit\"])");a(c).each(function(){var c=a(this).attr("name");var d=undefined;if(a(this).attr("type")==="checkbox"){if(a(this).is(":checked")){d=a(this).val()}else{return}}else{d=a(this).val()}var e=c.indexOf("custom_fields");if(e!==-1){var f=c.substring("custom_fields".length+1);if(!b["custom_fields"]){b["custom_fields"]={}}b["custom_fields"][f]=d;return}var g=c.indexOf("[]");if(g!==-1){c=c.substring(0,g);if(b[c]){b[c].push(d)}else{b[c]=[d]}}else{b[c]=d}});return b}function h(){a(b).find("._hideOnSuccess").hide(0);a(b).find("._showOnSuccess").show(200);var c=a(b).data("hide-external-class");if(c){a("."+c).hide(0)}}function i(b){var e=a(d).find("input[type=\"submit\"]");a(e).attr("disabled",true);a.ajax({type:"POST",dataType:"JSON",url:theme_module_sendgrid_api.ajaxurl,data:{action:"submit-sendgrid-form",security:theme_module_sendgrid_api.nonce,formData:b},success:function success(b){if(b["code"]===200){a(e).attr("disabled",false);h();if(!b["result"]["errors"]){new c(true,"is_subscribed")}}else{console.error(b["error"])}},error:function error(){}})}}a(document).ready(function(){new c});function c(){var b=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(c){var d=g(c);i(JSON.stringify(d));return}else{e()}function e(){var a=h();if(a){var c;try{c=JSON.parse(a)}catch(a){f();return}if(b){f();return}if(c.hasOwnProperty("timestamp")){var d=theme_module_sendgrid_api.cookieRefreshRate*3600*24;var e=Math.round(new Date/1000);if(parseInt(c.timestamp)+d>e){f()}}}else{f()}}function f(){a.ajax({type:"POST",dataType:"JSON",url:theme_module_sendgrid_api.ajaxurl,data:{action:"check-sg-subscription",security:theme_module_sendgrid_api.nonce},success:function success(a){if(a["code"]===200){var b=g(a["status"]);i(JSON.stringify(b))}}})}function g(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var b={timestamp:Math.round(new Date/1000),status:a};return b}function h(){var a=theme_module_sendgrid_api.cookieID;var b=window.cookieman?window.cookieman.getCookie(a):null;return b?decodeURIComponent(b):null}function i(a){var b=theme_module_sendgrid_api.cookieID;var c=365;window.cookieman?window.cookieman.registerCookie(b,a,c,"necessary"):null}}})(jQuery);
//# sourceMappingURL=sendgrid-api.min.js.map